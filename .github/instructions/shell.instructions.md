---
applyTo: "**/*.sh"
---

# Shell Script Guidelines

## Shell Environments
- Boot script (`scripts/vyos-onecontext-boot.sh`) uses POSIX `/bin/sh`
- Legacy context script (`vyos-vmcontext.sh`) uses `/usr/bin/vbash`
- Test scripts use `/bin/bash`
- VyOS config commands are generated by Python, not executed directly in shell

## Error Handling
- Check command exit codes
- Log errors to syslog for debugging
- Fail gracefully - partial config is better than boot failure

## VyOS Boot Integration
- Entry point is `/config/scripts/vyos-postconfig-bootup.script` (VyOS hook, not systemd)
- This calls `scripts/vyos-onecontext-boot.sh` which runs the Python module
- Boot script requires `vyattacfg` group membership for VyOS config API access

## ShellCheck
- All scripts must pass shellcheck
- Use `shellcheck disable=SCXXXX` comments sparingly and with justification
