# Error scenario test: Missing required fields
# Tests graceful error handling when validation fails
#
# Expected behavior:
# - Valid sections (hostname, SSH, eth0, DHCP) are applied
# - OSPF_JSON section fails validation due to missing required 'enabled'
# - Validation error is logged with specific field information
# - Exit code indicates errors occurred (but valid config was applied)

HOSTNAME="test-missing-fields"
SSH_PUBLIC_KEY="ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIC+Z0iQ4AaHmgc9OWxSBKJnkXtOa57N0AVMv8cJYWi+F test@integration"
ONECONTEXT_MODE="stateless"

# Primary IP for management/SSH
ETH0_IP="192.168.122.91"
ETH0_MASK="255.255.255.0"
ETH0_GATEWAY="192.168.122.1"

# Alias IP for DHCP server network
ETH0_ALIAS0_IP="10.61.1.1"
ETH0_ALIAS0_MASK="255.255.255.0"

# VALID: DHCP configuration
DHCP_JSON='{"pools":[{"interface":"eth0","subnet":"10.61.1.0/24","range_start":"10.61.1.100","range_end":"10.61.1.150","gateway":"10.61.1.1","dns":["10.61.1.1"],"lease_time":3600}]}'

# INVALID: OSPF missing required 'enabled' field
# This should fail Pydantic validation and be collected as an error
# Note: router_id is optional (defaults to None), but enabled is required
OSPF_JSON='{"interfaces":[{"name":"eth0","area":"0.0.0.0","passive":true}],"redistribute":["connected"]}'
