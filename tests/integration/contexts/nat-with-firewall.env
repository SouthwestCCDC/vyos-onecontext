# NAT with firewall test context
# Tests combined functionality of NAT + firewall zone
#
# This validates:
# - Source NAT (masquerade) for internal subnet
# - Firewall zone with default drop policy
# - Global state policies (established/related/invalid)
# - Integration of NAT and firewall in VyOS
#
# Note: VyOS only allows one zone per interface. Multi-zone setups
# require multiple physical interfaces, which isn't possible in
# single-NIC QEMU tests. Zone policies are validated in unit tests.

HOSTNAME="test-nat-firewall"
ONECONTEXT_MODE="stateless"

# WAN interface
ETH0_IP="192.168.122.70"
ETH0_MASK="255.255.255.0"
ETH0_GATEWAY="192.168.122.1"

# Secondary IP (alias) - represents internal subnet for NAT
ETH0_ALIAS0_IP="10.200.0.1"
ETH0_ALIAS0_MASK="255.255.255.0"

# NAT - masquerade internal subnet
NAT_JSON='{"source":[{"outbound_interface":"eth0","source_address":"10.200.0.0/24","translation":"masquerade"}]}'

# Firewall - single zone with default drop
# Tests zone creation and global state policies
# Note: Can't test zone policies (inter-zone traffic) with single interface
FIREWALL_JSON='{"zones":{"WAN":{"name":"WAN","interfaces":["eth0"],"default_action":"drop"}}}'
