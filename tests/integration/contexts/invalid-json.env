# Error scenario test: Invalid JSON in one section
# Tests graceful error handling when JSON parsing fails
#
# Expected behavior:
# - Valid sections (hostname, SSH, eth0, DHCP) are applied
# - ROUTES_JSON section is skipped due to malformed JSON
# - Error is logged for invalid JSON
# - Exit code indicates errors occurred (but valid config was applied)

HOSTNAME="test-invalid-json"
SSH_PUBLIC_KEY="ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIDl4xuwRBxNEtRDM/h86XMkNYNrsnc3Z+g4DdyHt+S1q test@integration"
ONECONTEXT_MODE="stateless"

# Primary IP for management/SSH
ETH0_IP="192.168.122.90"
ETH0_MASK="255.255.255.0"
ETH0_GATEWAY="192.168.122.1"

# Alias IP for DHCP server network
ETH0_ALIAS0_IP="10.60.1.1"
ETH0_ALIAS0_MASK="255.255.255.0"

# INVALID: Malformed JSON (missing closing bracket, invalid syntax)
# This should be caught by JSON parser and collected as an error
ROUTES_JSON='{"static": [{"interface": "eth0", "destination": "10.0.0.0/8"'

# VALID: DHCP configuration should still work
DHCP_JSON='{"pools":[{"interface":"eth0","subnet":"10.60.1.0/24","range_start":"10.60.1.100","range_end":"10.60.1.150","gateway":"10.60.1.1","dns":["10.60.1.1"],"lease_time":3600}]}'
