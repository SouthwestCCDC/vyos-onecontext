# Full-featured router configuration
# Exercises all features: interfaces, aliases, OSPF, firewall, NAT, DHCP, routes

# Identity
HOSTNAME="full-featured-router"
SSH_PUBLIC_KEY="ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFullFeatureKey12345678901234567890abcdefghi netops@full-router"

# Operational mode
ONECONTEXT_MODE="stateless"

# Management interface (eth0) - VRF placement
ETH0_IP="10.255.0.1"
ETH0_MASK="255.255.255.0"
ETH0_VROUTER_MANAGEMENT="YES"
ETH0_MTU="1500"

# External interface (eth1) with aliases for 1:1 NAT
ETH1_IP="198.51.100.1"
ETH1_MASK="255.255.255.0"
ETH1_GATEWAY="198.51.100.254"

# Aliases on eth1 for binat
ETH1_ALIAS0_IP="198.51.100.10"
ETH1_ALIAS0_MASK="255.255.255.0"
ETH1_ALIAS1_IP="198.51.100.11"
ETH1_ALIAS1_MASK="255.255.255.0"

# Internal network (eth2) - OSPF and DHCP
ETH2_IP="172.16.0.1"
ETH2_MASK="255.255.0.0"

# Static routes with various options
ROUTES_JSON='{"static": [{"interface": "eth1", "destination": "192.0.2.0/24", "gateway": "198.51.100.2", "distance": 5}, {"interface": "eth2", "destination": "172.20.0.0/16", "gateway": "172.16.0.254"}]}'

# OSPF configuration on eth1 and eth2
OSPF_JSON='{"enabled": true, "router_id": "10.255.0.1", "interfaces": [{"name": "eth1", "area": "0.0.0.0", "passive": false, "cost": 10}, {"name": "eth2", "area": "0.0.0.1", "passive": true}], "redistribute": ["connected", "static"], "default_information": {"originate": true, "always": true, "metric": 100}}'

# NAT: source (masquerade), destination (port forward), binat (1:1)
NAT_JSON='{"source": [{"outbound_interface": "eth1", "source_address": "172.16.0.0/16", "translation": "masquerade", "description": "Masquerade internal traffic"}], "destination": [{"inbound_interface": "eth1", "protocol": "tcp", "destination_port": 443, "translation_address": "172.16.1.10", "translation_port": 443, "description": "HTTPS to web server"}, {"inbound_interface": "eth1", "protocol": "tcp", "destination_port": 25, "translation_address": "172.16.1.20", "translation_port": 25, "description": "SMTP to mail server"}], "binat": [{"external_address": "198.51.100.10", "internal_address": "172.16.2.10", "interface": "eth1", "description": "DB server binat"}, {"external_address": "198.51.100.11", "internal_address": "172.16.2.11", "interface": "eth1", "description": "App server binat"}]}'

# DHCP with pool and reservations
DHCP_JSON='{"pools": [{"interface": "eth2", "subnet": "172.16.0.0/16", "range_start": "172.16.10.1", "range_end": "172.16.10.254", "gateway": "172.16.0.1", "dns": ["172.16.0.1"], "lease_time": 7200, "domain": "internal.example.com"}], "reservations": [{"interface": "eth2", "mac": "aa:bb:cc:dd:ee:01", "ip": "172.16.1.10", "hostname": "webserver"}, {"interface": "eth2", "mac": "aa:bb:cc:dd:ee:02", "ip": "172.16.1.20", "hostname": "mailserver"}]}'

# Firewall with zones, groups, and policies
FIREWALL_JSON='{"groups": {"network": {"INTERNAL_NETS": ["172.16.0.0/16", "10.0.0.0/8"], "EXTERNAL_TRUSTED": ["192.0.2.0/24"]}, "address": {"DNS_SERVERS": ["8.8.8.8", "8.8.4.4"]}, "port": {"WEB_PORTS": [80, 443], "MAIL_PORTS": [25, 465, 587, 993]}}, "zones": {"WAN": {"name": "WAN", "interfaces": ["eth1"], "default_action": "drop"}, "LAN": {"name": "LAN", "interfaces": ["eth2"], "default_action": "drop"}, "MGMT": {"name": "MGMT", "interfaces": ["eth0"], "default_action": "reject"}}, "policies": [{"from": "LAN", "to": "WAN", "rules": [{"action": "accept", "protocol": "tcp", "destination_port_group": "WEB_PORTS", "description": "Allow web"}, {"action": "accept", "protocol": "udp", "destination_port": 53, "description": "Allow DNS"}, {"action": "accept", "protocol": "icmp", "icmp_type": "echo-request", "description": "Allow ping"}]}, {"from": "WAN", "to": "LAN", "rules": [{"action": "accept", "protocol": "tcp", "destination_port_group": "WEB_PORTS", "source_network_group": "EXTERNAL_TRUSTED", "description": "Allow trusted web access"}]}]}'

# Raw VyOS commands via START_CONFIG
START_CONFIG="set system option performance throughput
set system syslog global facility all level info
set system time-zone UTC"
